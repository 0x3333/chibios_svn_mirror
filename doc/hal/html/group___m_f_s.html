<!-- HTML header for doxygen 1.8.8-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<title>ChibiOS/HAL: Managed Flash Storage Driver</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">ChibiOS/HAL
   &#160;<span id="projectnumber">6.1.0</span>
<script type="text/javascript"><!--
google_ad_client = "pub-3840594581853944";
/* Documentation, bottom, 728x90, created 9/19/10 */
google_ad_slot = "1902290615";
google_ad_width = 728;
google_ad_height = 90;
//-->
</script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group___m_f_s.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#enum-members">Enumerations</a>  </div>
  <div class="headertitle">
<div class="title">Managed Flash Storage Driver<div class="ingroups"><a class="el" href="group___i_o.html">HAL</a> &raquo; <a class="el" href="group___h_a_l___c_o_m_p_l_e_x___d_r_i_v_e_r_s.html">Complex Drivers</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Managed Flash Storage Driver.  
<a href="#details">More...</a></p>
<div class="dynheader">
Collaboration diagram for Managed Flash Storage Driver:</div>
<div class="dyncontent">
<center><table><tr><td><img src="group___m_f_s.png" border="0" alt="" usemap="#group______m__f__s"/>
<map name="group______m__f__s" id="group______m__f__s">
<area shape="rect" id="node2" href="group___h_a_l___c_o_m_p_l_e_x___d_r_i_v_e_r_s.html" title="HAL Complex Drivers. " alt="" coords="5,11,107,35"/>
</map>
</td></tr></table></center>
</div>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Managed Flash Storage Driver. </p>
<p>This module implements a managed flash storage able to store a finite number of variable-size records. Records are retrieved by their index number.<br />
 The driver is automatically performs:</p><ul>
<li>Wear leveling.</li>
<li>Auto repair after power loss.</li>
<li>Garbage collection in order to remove erased data.</li>
</ul>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga0277a2d4d7591173f0275af429e33a13"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___m_f_s.html#ga0277a2d4d7591173f0275af429e33a13">RET_ON_ERROR</a>(err)</td></tr>
<tr class="memdesc:ga0277a2d4d7591173f0275af429e33a13"><td class="mdescLeft">&#160;</td><td class="mdescRight">Error check helper.  <a href="#ga0277a2d4d7591173f0275af429e33a13">More...</a><br /></td></tr>
<tr class="separator:ga0277a2d4d7591173f0275af429e33a13"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="member-group"></a>
Configuration options</h2></td></tr>
<tr class="memitem:ga0dd05a7bc7d3f69ee9e95c0fe3f26b38"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___m_f_s.html#ga0dd05a7bc7d3f69ee9e95c0fe3f26b38">MFS_CFG_MAX_RECORDS</a>&#160;&#160;&#160;32</td></tr>
<tr class="memdesc:ga0dd05a7bc7d3f69ee9e95c0fe3f26b38"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maximum number of indexed records in the managed storage.  <a href="#ga0dd05a7bc7d3f69ee9e95c0fe3f26b38">More...</a><br /></td></tr>
<tr class="separator:ga0dd05a7bc7d3f69ee9e95c0fe3f26b38"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7370ae665f30570c642799ce51f7730d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___m_f_s.html#ga7370ae665f30570c642799ce51f7730d">MFS_CFG_MAX_REPAIR_ATTEMPTS</a>&#160;&#160;&#160;3</td></tr>
<tr class="memdesc:ga7370ae665f30570c642799ce51f7730d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maximum number of repair attempts on partition mount.  <a href="#ga7370ae665f30570c642799ce51f7730d">More...</a><br /></td></tr>
<tr class="separator:ga7370ae665f30570c642799ce51f7730d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9387a02dbeca5b8288fd72afaa285ebe"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___m_f_s.html#ga9387a02dbeca5b8288fd72afaa285ebe">MFS_CFG_WRITE_VERIFY</a>&#160;&#160;&#160;TRUE</td></tr>
<tr class="memdesc:ga9387a02dbeca5b8288fd72afaa285ebe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Verify written data.  <a href="#ga9387a02dbeca5b8288fd72afaa285ebe">More...</a><br /></td></tr>
<tr class="separator:ga9387a02dbeca5b8288fd72afaa285ebe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5b6511e1ff36948a405373a579ea95fe"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___m_f_s.html#ga5b6511e1ff36948a405373a579ea95fe">MFS_CFG_STRONG_CHECKING</a>&#160;&#160;&#160;TRUE</td></tr>
<tr class="memdesc:ga5b6511e1ff36948a405373a579ea95fe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enables a stronger and slower check procedure on mount.  <a href="#ga5b6511e1ff36948a405373a579ea95fe">More...</a><br /></td></tr>
<tr class="separator:ga5b6511e1ff36948a405373a579ea95fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1b852c8a1778e81373b7e8a4626c5472"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___m_f_s.html#ga1b852c8a1778e81373b7e8a4626c5472">MFS_CFG_BUFFER_SIZE</a>&#160;&#160;&#160;32</td></tr>
<tr class="memdesc:ga1b852c8a1778e81373b7e8a4626c5472"><td class="mdescLeft">&#160;</td><td class="mdescRight">Size of the buffer used for data copying.  <a href="#ga1b852c8a1778e81373b7e8a4626c5472">More...</a><br /></td></tr>
<tr class="separator:ga1b852c8a1778e81373b7e8a4626c5472"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="member-group"></a>
Error codes handling macros</h2></td></tr>
<tr class="memitem:gae3dd499fd3b3c1528f48cdd8cdf39df0"><td class="memItemLeft" align="right" valign="top"><a id="gae3dd499fd3b3c1528f48cdd8cdf39df0"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MFS_IS_ERROR</b>(err)&#160;&#160;&#160;((err) &lt; MFS_NO_ERROR)</td></tr>
<tr class="separator:gae3dd499fd3b3c1528f48cdd8cdf39df0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5a9e15815ed824b46d0158e0f4c3249e"><td class="memItemLeft" align="right" valign="top"><a id="ga5a9e15815ed824b46d0158e0f4c3249e"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MFS_IS_WARNING</b>(err)&#160;&#160;&#160;((err) &gt; MFS_NO_ERROR)</td></tr>
<tr class="separator:ga5a9e15815ed824b46d0158e0f4c3249e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:gab1553dd70ef82b0c4a4ba607c660563a"><td class="memItemLeft" align="right" valign="top">typedef uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___m_f_s.html#gab1553dd70ef82b0c4a4ba607c660563a">mfs_id_t</a></td></tr>
<tr class="memdesc:gab1553dd70ef82b0c4a4ba607c660563a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Type of a record identifier.  <a href="#gab1553dd70ef82b0c4a4ba607c660563a">More...</a><br /></td></tr>
<tr class="separator:gab1553dd70ef82b0c4a4ba607c660563a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">union &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="unionmfs__bank__header__t.html">mfs_bank_header_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Type of a bank header.  <a href="unionmfs__bank__header__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">union &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="unionmfs__data__header__t.html">mfs_data_header_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Type of a data block header.  <a href="unionmfs__data__header__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_m_f_s_config.html">MFSConfig</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Type of a MFS configuration structure.  <a href="struct_m_f_s_config.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_m_f_s_driver.html">MFSDriver</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Type of an MFS instance.  <a href="struct_m_f_s_driver.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gabfee0e57611e55ed09ad89610b9ffdfd"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="group___m_f_s.html#ga4907f190de6357e5dd4d92227c490cac">mfs_error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___m_f_s.html#gabfee0e57611e55ed09ad89610b9ffdfd">mfs_flash_read</a> (<a class="el" href="struct_m_f_s_driver.html">MFSDriver</a> *mfsp, <a class="el" href="group___h_a_l___f_l_a_s_h.html#ga60d8c17713c707efa497130923db3ca3">flash_offset_t</a> offset, size_t n, uint8_t *rp)</td></tr>
<tr class="memdesc:gabfee0e57611e55ed09ad89610b9ffdfd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Flash read.  <a href="#gabfee0e57611e55ed09ad89610b9ffdfd">More...</a><br /></td></tr>
<tr class="separator:gabfee0e57611e55ed09ad89610b9ffdfd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7ff7f938edf6fc7d7568dff18696ce7c"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="group___m_f_s.html#ga4907f190de6357e5dd4d92227c490cac">mfs_error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___m_f_s.html#ga7ff7f938edf6fc7d7568dff18696ce7c">mfs_flash_write</a> (<a class="el" href="struct_m_f_s_driver.html">MFSDriver</a> *mfsp, <a class="el" href="group___h_a_l___f_l_a_s_h.html#ga60d8c17713c707efa497130923db3ca3">flash_offset_t</a> offset, size_t n, const uint8_t *wp)</td></tr>
<tr class="memdesc:ga7ff7f938edf6fc7d7568dff18696ce7c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Flash write.  <a href="#ga7ff7f938edf6fc7d7568dff18696ce7c">More...</a><br /></td></tr>
<tr class="separator:ga7ff7f938edf6fc7d7568dff18696ce7c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga97816ae2db1ccf97bf652877db13aff1"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="group___m_f_s.html#ga4907f190de6357e5dd4d92227c490cac">mfs_error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___m_f_s.html#ga97816ae2db1ccf97bf652877db13aff1">mfs_flash_copy</a> (<a class="el" href="struct_m_f_s_driver.html">MFSDriver</a> *mfsp, <a class="el" href="group___h_a_l___f_l_a_s_h.html#ga60d8c17713c707efa497130923db3ca3">flash_offset_t</a> doffset, <a class="el" href="group___h_a_l___f_l_a_s_h.html#ga60d8c17713c707efa497130923db3ca3">flash_offset_t</a> soffset, uint32_t n)</td></tr>
<tr class="memdesc:ga97816ae2db1ccf97bf652877db13aff1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Flash copy.  <a href="#ga97816ae2db1ccf97bf652877db13aff1">More...</a><br /></td></tr>
<tr class="separator:ga97816ae2db1ccf97bf652877db13aff1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafa2fc5d3f323e9a6c3d597432d57471d"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="group___m_f_s.html#ga4907f190de6357e5dd4d92227c490cac">mfs_error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___m_f_s.html#gafa2fc5d3f323e9a6c3d597432d57471d">mfs_record_check</a> (<a class="el" href="struct_m_f_s_driver.html">MFSDriver</a> *mfsp, <a class="el" href="unionmfs__data__header__t.html">mfs_data_header_t</a> *dhdrp, <a class="el" href="group___h_a_l___f_l_a_s_h.html#ga60d8c17713c707efa497130923db3ca3">flash_offset_t</a> offset, <a class="el" href="group___h_a_l___f_l_a_s_h.html#ga60d8c17713c707efa497130923db3ca3">flash_offset_t</a> limit, <a class="el" href="group___m_f_s.html#gaf4e3ea9fbb9b415259e2fa0bcfb55c1f">mfs_record_state_t</a> *sts)</td></tr>
<tr class="memdesc:gafa2fc5d3f323e9a6c3d597432d57471d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Verifies integrity of a record.  <a href="#gafa2fc5d3f323e9a6c3d597432d57471d">More...</a><br /></td></tr>
<tr class="separator:gafa2fc5d3f323e9a6c3d597432d57471d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac66b45ab34eea80bfa81422127c430ed"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="group___m_f_s.html#ga4907f190de6357e5dd4d92227c490cac">mfs_error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___m_f_s.html#gac66b45ab34eea80bfa81422127c430ed">mfs_bank_erase</a> (<a class="el" href="struct_m_f_s_driver.html">MFSDriver</a> *mfsp, <a class="el" href="group___m_f_s.html#gacd79c4165137b0cdce501f1fb9ee9f38">mfs_bank_t</a> bank)</td></tr>
<tr class="memdesc:gac66b45ab34eea80bfa81422127c430ed"><td class="mdescLeft">&#160;</td><td class="mdescRight">Erases and verifies all sectors belonging to a bank.  <a href="#gac66b45ab34eea80bfa81422127c430ed">More...</a><br /></td></tr>
<tr class="separator:gac66b45ab34eea80bfa81422127c430ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7ef3fba2f9e3b9d03811faa1eaf4bd09"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="group___m_f_s.html#ga4907f190de6357e5dd4d92227c490cac">mfs_error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___m_f_s.html#ga7ef3fba2f9e3b9d03811faa1eaf4bd09">mfs_bank_verify_erase</a> (<a class="el" href="struct_m_f_s_driver.html">MFSDriver</a> *mfsp, <a class="el" href="group___m_f_s.html#gacd79c4165137b0cdce501f1fb9ee9f38">mfs_bank_t</a> bank)</td></tr>
<tr class="memdesc:ga7ef3fba2f9e3b9d03811faa1eaf4bd09"><td class="mdescLeft">&#160;</td><td class="mdescRight">Erases and verifies all sectors belonging to a bank.  <a href="#ga7ef3fba2f9e3b9d03811faa1eaf4bd09">More...</a><br /></td></tr>
<tr class="separator:ga7ef3fba2f9e3b9d03811faa1eaf4bd09"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac1f359bdbdb34e5a45832751f91ed73e"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="group___m_f_s.html#ga4907f190de6357e5dd4d92227c490cac">mfs_error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___m_f_s.html#gac1f359bdbdb34e5a45832751f91ed73e">mfs_bank_write_header</a> (<a class="el" href="struct_m_f_s_driver.html">MFSDriver</a> *mfsp, <a class="el" href="group___m_f_s.html#gacd79c4165137b0cdce501f1fb9ee9f38">mfs_bank_t</a> bank, uint32_t cnt)</td></tr>
<tr class="memdesc:gac1f359bdbdb34e5a45832751f91ed73e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Writes the validation header in a bank.  <a href="#gac1f359bdbdb34e5a45832751f91ed73e">More...</a><br /></td></tr>
<tr class="separator:gac1f359bdbdb34e5a45832751f91ed73e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga43672f7618a835997fa771e99e784184"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="group___m_f_s.html#ga4907f190de6357e5dd4d92227c490cac">mfs_error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___m_f_s.html#ga43672f7618a835997fa771e99e784184">mfs_bank_scan_records</a> (<a class="el" href="struct_m_f_s_driver.html">MFSDriver</a> *mfsp, <a class="el" href="group___m_f_s.html#gacd79c4165137b0cdce501f1fb9ee9f38">mfs_bank_t</a> bank, <a class="el" href="group___m_f_s.html#gaece589baf17093143049bb73d07e1968">mfs_bank_state_t</a> *statep)</td></tr>
<tr class="memdesc:ga43672f7618a835997fa771e99e784184"><td class="mdescLeft">&#160;</td><td class="mdescRight">Scans blocks searching for records.  <a href="#ga43672f7618a835997fa771e99e784184">More...</a><br /></td></tr>
<tr class="separator:ga43672f7618a835997fa771e99e784184"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae543e9eed45f7236869a8ffc5682c991"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="group___m_f_s.html#ga4907f190de6357e5dd4d92227c490cac">mfs_error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___m_f_s.html#gae543e9eed45f7236869a8ffc5682c991">mfs_bank_get_state</a> (<a class="el" href="struct_m_f_s_driver.html">MFSDriver</a> *mfsp, <a class="el" href="group___m_f_s.html#gacd79c4165137b0cdce501f1fb9ee9f38">mfs_bank_t</a> bank, <a class="el" href="group___m_f_s.html#gaece589baf17093143049bb73d07e1968">mfs_bank_state_t</a> *statep, uint32_t *cntp)</td></tr>
<tr class="memdesc:gae543e9eed45f7236869a8ffc5682c991"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determines the state of a bank.  <a href="#gae543e9eed45f7236869a8ffc5682c991">More...</a><br /></td></tr>
<tr class="separator:gae543e9eed45f7236869a8ffc5682c991"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf98c194cbd68acefc32dc98848c53c59"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="group___m_f_s.html#ga4907f190de6357e5dd4d92227c490cac">mfs_error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___m_f_s.html#gaf98c194cbd68acefc32dc98848c53c59">mfs_bank_mount</a> (<a class="el" href="struct_m_f_s_driver.html">MFSDriver</a> *mfsp, <a class="el" href="group___m_f_s.html#gacd79c4165137b0cdce501f1fb9ee9f38">mfs_bank_t</a> bank, <a class="el" href="group___m_f_s.html#gaece589baf17093143049bb73d07e1968">mfs_bank_state_t</a> *statep)</td></tr>
<tr class="memdesc:gaf98c194cbd68acefc32dc98848c53c59"><td class="mdescLeft">&#160;</td><td class="mdescRight">Selects a bank as current.  <a href="#gaf98c194cbd68acefc32dc98848c53c59">More...</a><br /></td></tr>
<tr class="separator:gaf98c194cbd68acefc32dc98848c53c59"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3880c92a1858f47e85bc21d586db2768"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="group___m_f_s.html#ga4907f190de6357e5dd4d92227c490cac">mfs_error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___m_f_s.html#ga3880c92a1858f47e85bc21d586db2768">mfs_garbage_collect</a> (<a class="el" href="struct_m_f_s_driver.html">MFSDriver</a> *mfsp)</td></tr>
<tr class="memdesc:ga3880c92a1858f47e85bc21d586db2768"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enforces a garbage collection.  <a href="#ga3880c92a1858f47e85bc21d586db2768">More...</a><br /></td></tr>
<tr class="separator:ga3880c92a1858f47e85bc21d586db2768"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5625fd5863620167862fc77ac1aedcf6"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="group___m_f_s.html#ga4907f190de6357e5dd4d92227c490cac">mfs_error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___m_f_s.html#ga5625fd5863620167862fc77ac1aedcf6">mfs_try_mount</a> (<a class="el" href="struct_m_f_s_driver.html">MFSDriver</a> *mfsp)</td></tr>
<tr class="memdesc:ga5625fd5863620167862fc77ac1aedcf6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Performs a flash partition mount attempt.  <a href="#ga5625fd5863620167862fc77ac1aedcf6">More...</a><br /></td></tr>
<tr class="separator:ga5625fd5863620167862fc77ac1aedcf6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga973dac70b5f8ea14000fd262fef8a1fd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___m_f_s.html#ga4907f190de6357e5dd4d92227c490cac">mfs_error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___m_f_s.html#ga973dac70b5f8ea14000fd262fef8a1fd">mfs_mount</a> (<a class="el" href="struct_m_f_s_driver.html">MFSDriver</a> *mfsp)</td></tr>
<tr class="memdesc:ga973dac70b5f8ea14000fd262fef8a1fd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configures and activates a MFS driver.  <a href="#ga973dac70b5f8ea14000fd262fef8a1fd">More...</a><br /></td></tr>
<tr class="separator:ga973dac70b5f8ea14000fd262fef8a1fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab79398dd37917f5ddc8e3f80d16e88b0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___m_f_s.html#gab79398dd37917f5ddc8e3f80d16e88b0">mfsObjectInit</a> (<a class="el" href="struct_m_f_s_driver.html">MFSDriver</a> *mfsp)</td></tr>
<tr class="memdesc:gab79398dd37917f5ddc8e3f80d16e88b0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializes an instance.  <a href="#gab79398dd37917f5ddc8e3f80d16e88b0">More...</a><br /></td></tr>
<tr class="separator:gab79398dd37917f5ddc8e3f80d16e88b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6869dc876ed8621a612ed5dd95afece6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___m_f_s.html#ga4907f190de6357e5dd4d92227c490cac">mfs_error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___m_f_s.html#ga6869dc876ed8621a612ed5dd95afece6">mfsStart</a> (<a class="el" href="struct_m_f_s_driver.html">MFSDriver</a> *mfsp, const <a class="el" href="struct_m_f_s_config.html">MFSConfig</a> *config)</td></tr>
<tr class="memdesc:ga6869dc876ed8621a612ed5dd95afece6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configures and activates a MFS driver.  <a href="#ga6869dc876ed8621a612ed5dd95afece6">More...</a><br /></td></tr>
<tr class="separator:ga6869dc876ed8621a612ed5dd95afece6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae3f8c1b72b2f060c3c6133ad93d41557"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___m_f_s.html#gae3f8c1b72b2f060c3c6133ad93d41557">mfsStop</a> (<a class="el" href="struct_m_f_s_driver.html">MFSDriver</a> *mfsp)</td></tr>
<tr class="memdesc:gae3f8c1b72b2f060c3c6133ad93d41557"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deactivates a MFS driver.  <a href="#gae3f8c1b72b2f060c3c6133ad93d41557">More...</a><br /></td></tr>
<tr class="separator:gae3f8c1b72b2f060c3c6133ad93d41557"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae9f14dce0c75dee4e0a24ea776961a00"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___m_f_s.html#ga4907f190de6357e5dd4d92227c490cac">mfs_error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___m_f_s.html#gae9f14dce0c75dee4e0a24ea776961a00">mfsErase</a> (<a class="el" href="struct_m_f_s_driver.html">MFSDriver</a> *mfsp)</td></tr>
<tr class="memdesc:gae9f14dce0c75dee4e0a24ea776961a00"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destroys the state of the managed storage by erasing the flash.  <a href="#gae9f14dce0c75dee4e0a24ea776961a00">More...</a><br /></td></tr>
<tr class="separator:gae9f14dce0c75dee4e0a24ea776961a00"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2b6577aeec41970de3b351f27b728d0b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___m_f_s.html#ga4907f190de6357e5dd4d92227c490cac">mfs_error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___m_f_s.html#ga2b6577aeec41970de3b351f27b728d0b">mfsReadRecord</a> (<a class="el" href="struct_m_f_s_driver.html">MFSDriver</a> *mfsp, <a class="el" href="group___m_f_s.html#gab1553dd70ef82b0c4a4ba607c660563a">mfs_id_t</a> id, size_t *np, uint8_t *buffer)</td></tr>
<tr class="memdesc:ga2b6577aeec41970de3b351f27b728d0b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieves and reads a data record.  <a href="#ga2b6577aeec41970de3b351f27b728d0b">More...</a><br /></td></tr>
<tr class="separator:ga2b6577aeec41970de3b351f27b728d0b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa8d796e4f2fda16203809b7eb2015467"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___m_f_s.html#ga4907f190de6357e5dd4d92227c490cac">mfs_error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___m_f_s.html#gaa8d796e4f2fda16203809b7eb2015467">mfsWriteRecord</a> (<a class="el" href="struct_m_f_s_driver.html">MFSDriver</a> *mfsp, <a class="el" href="group___m_f_s.html#gab1553dd70ef82b0c4a4ba607c660563a">mfs_id_t</a> id, size_t n, const uint8_t *buffer)</td></tr>
<tr class="memdesc:gaa8d796e4f2fda16203809b7eb2015467"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates or updates a data record.  <a href="#gaa8d796e4f2fda16203809b7eb2015467">More...</a><br /></td></tr>
<tr class="separator:gaa8d796e4f2fda16203809b7eb2015467"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga05869bf0e68cd47e43c98663f1b6fbfc"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___m_f_s.html#ga4907f190de6357e5dd4d92227c490cac">mfs_error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___m_f_s.html#ga05869bf0e68cd47e43c98663f1b6fbfc">mfsEraseRecord</a> (<a class="el" href="struct_m_f_s_driver.html">MFSDriver</a> *mfsp, <a class="el" href="group___m_f_s.html#gab1553dd70ef82b0c4a4ba607c660563a">mfs_id_t</a> id)</td></tr>
<tr class="memdesc:ga05869bf0e68cd47e43c98663f1b6fbfc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Erases a data record.  <a href="#ga05869bf0e68cd47e43c98663f1b6fbfc">More...</a><br /></td></tr>
<tr class="separator:ga05869bf0e68cd47e43c98663f1b6fbfc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga88081d60d4dfc85bacb918e74809da1e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___m_f_s.html#ga4907f190de6357e5dd4d92227c490cac">mfs_error_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___m_f_s.html#ga88081d60d4dfc85bacb918e74809da1e">mfsPerformGarbageCollection</a> (<a class="el" href="struct_m_f_s_driver.html">MFSDriver</a> *mfsp)</td></tr>
<tr class="memdesc:ga88081d60d4dfc85bacb918e74809da1e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enforces a garbage collection operation.  <a href="#ga88081d60d4dfc85bacb918e74809da1e">More...</a><br /></td></tr>
<tr class="separator:ga88081d60d4dfc85bacb918e74809da1e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:gacd79c4165137b0cdce501f1fb9ee9f38"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___m_f_s.html#gacd79c4165137b0cdce501f1fb9ee9f38">mfs_bank_t</a> <tr class="memdesc:gacd79c4165137b0cdce501f1fb9ee9f38"><td class="mdescLeft">&#160;</td><td class="mdescRight">Type of a flash bank.  <a href="group___m_f_s.html#gacd79c4165137b0cdce501f1fb9ee9f38">More...</a><br /></td></tr>
</td></tr>
<tr class="separator:gacd79c4165137b0cdce501f1fb9ee9f38"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga58f14c27920b69ab065a8f73281d2732"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___m_f_s.html#ga58f14c27920b69ab065a8f73281d2732">mfs_state_t</a> <tr class="memdesc:ga58f14c27920b69ab065a8f73281d2732"><td class="mdescLeft">&#160;</td><td class="mdescRight">Type of driver state machine states.  <a href="group___m_f_s.html#ga58f14c27920b69ab065a8f73281d2732">More...</a><br /></td></tr>
</td></tr>
<tr class="separator:ga58f14c27920b69ab065a8f73281d2732"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4907f190de6357e5dd4d92227c490cac"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___m_f_s.html#ga4907f190de6357e5dd4d92227c490cac">mfs_error_t</a> <tr class="memdesc:ga4907f190de6357e5dd4d92227c490cac"><td class="mdescLeft">&#160;</td><td class="mdescRight">Type of an MFS error code.  <a href="group___m_f_s.html#ga4907f190de6357e5dd4d92227c490cac">More...</a><br /></td></tr>
</td></tr>
<tr class="separator:ga4907f190de6357e5dd4d92227c490cac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaece589baf17093143049bb73d07e1968"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___m_f_s.html#gaece589baf17093143049bb73d07e1968">mfs_bank_state_t</a> <tr class="memdesc:gaece589baf17093143049bb73d07e1968"><td class="mdescLeft">&#160;</td><td class="mdescRight">Type of a bank state assessment.  <a href="group___m_f_s.html#gaece589baf17093143049bb73d07e1968">More...</a><br /></td></tr>
</td></tr>
<tr class="separator:gaece589baf17093143049bb73d07e1968"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf4e3ea9fbb9b415259e2fa0bcfb55c1f"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___m_f_s.html#gaf4e3ea9fbb9b415259e2fa0bcfb55c1f">mfs_record_state_t</a> <tr class="memdesc:gaf4e3ea9fbb9b415259e2fa0bcfb55c1f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Type of a record state assessment.  <a href="group___m_f_s.html#gaf4e3ea9fbb9b415259e2fa0bcfb55c1f">More...</a><br /></td></tr>
</td></tr>
<tr class="separator:gaf4e3ea9fbb9b415259e2fa0bcfb55c1f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ga0277a2d4d7591173f0275af429e33a13"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0277a2d4d7591173f0275af429e33a13">&#9670;&nbsp;</a></span>RET_ON_ERROR</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RET_ON_ERROR</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">err</td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line"><span class="keywordflow">do</span> {                                              \</div><div class="line">  mfs_error_t e = (err);                                                    \</div><div class="line">  if (e != MFS_NO_ERROR) {                                                  \</div><div class="line">    return e;                                                               \</div><div class="line">  }                                                                         \</div><div class="line">} <span class="keywordflow">while</span> (<span class="keyword">false</span>)</div></div><!-- fragment -->
<p>Error check helper. </p>

<p class="definition">Definition at line <a class="el" href="mfs_8c_source.html#l00052">52</a> of file <a class="el" href="mfs_8c_source.html">mfs.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="group___m_f_s.html#ga97816ae2db1ccf97bf652877db13aff1">mfs_flash_copy()</a>, and <a class="el" href="group___m_f_s.html#ga5625fd5863620167862fc77ac1aedcf6">mfs_try_mount()</a>.</p>

</div>
</div>
<a id="ga0dd05a7bc7d3f69ee9e95c0fe3f26b38"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0dd05a7bc7d3f69ee9e95c0fe3f26b38">&#9670;&nbsp;</a></span>MFS_CFG_MAX_RECORDS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MFS_CFG_MAX_RECORDS&#160;&#160;&#160;32</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Maximum number of indexed records in the managed storage. </p>
<dl class="section note"><dt>Note</dt><dd>Record indexes go from 0 to <code>MFS_CFG_MAX_RECORDS</code> - 1. </dd></dl>

<p class="definition">Definition at line <a class="el" href="mfs_8h_source.html#l00054">54</a> of file <a class="el" href="mfs_8h_source.html">mfs.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="group___m_f_s.html#ga05869bf0e68cd47e43c98663f1b6fbfc">mfsEraseRecord()</a>, <a class="el" href="group___m_f_s.html#ga2b6577aeec41970de3b351f27b728d0b">mfsReadRecord()</a>, and <a class="el" href="group___m_f_s.html#gaa8d796e4f2fda16203809b7eb2015467">mfsWriteRecord()</a>.</p>

</div>
</div>
<a id="ga7370ae665f30570c642799ce51f7730d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga7370ae665f30570c642799ce51f7730d">&#9670;&nbsp;</a></span>MFS_CFG_MAX_REPAIR_ATTEMPTS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MFS_CFG_MAX_REPAIR_ATTEMPTS&#160;&#160;&#160;3</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Maximum number of repair attempts on partition mount. </p>

<p class="definition">Definition at line <a class="el" href="mfs_8h_source.html#l00061">61</a> of file <a class="el" href="mfs_8h_source.html">mfs.h</a>.</p>

</div>
</div>
<a id="ga9387a02dbeca5b8288fd72afaa285ebe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga9387a02dbeca5b8288fd72afaa285ebe">&#9670;&nbsp;</a></span>MFS_CFG_WRITE_VERIFY</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MFS_CFG_WRITE_VERIFY&#160;&#160;&#160;TRUE</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Verify written data. </p>

<p class="definition">Definition at line <a class="el" href="mfs_8h_source.html#l00068">68</a> of file <a class="el" href="mfs_8h_source.html">mfs.h</a>.</p>

</div>
</div>
<a id="ga5b6511e1ff36948a405373a579ea95fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5b6511e1ff36948a405373a579ea95fe">&#9670;&nbsp;</a></span>MFS_CFG_STRONG_CHECKING</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MFS_CFG_STRONG_CHECKING&#160;&#160;&#160;TRUE</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enables a stronger and slower check procedure on mount. </p>
<p>Strong checking requires reading of the whole written data and this can be slow, normal checking only checks integrity of metadata, data errors would be detected on read. </p>

<p class="definition">Definition at line <a class="el" href="mfs_8h_source.html#l00078">78</a> of file <a class="el" href="mfs_8h_source.html">mfs.h</a>.</p>

</div>
</div>
<a id="ga1b852c8a1778e81373b7e8a4626c5472"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1b852c8a1778e81373b7e8a4626c5472">&#9670;&nbsp;</a></span>MFS_CFG_BUFFER_SIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MFS_CFG_BUFFER_SIZE&#160;&#160;&#160;32</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Size of the buffer used for data copying. </p>
<dl class="section note"><dt>Note</dt><dd>The buffer size must be a power of two and not smaller than 16 bytes. </dd>
<dd>
Larger buffers improve performance, buffers with size multiple of the flash program page size work better. </dd></dl>

<p class="definition">Definition at line <a class="el" href="mfs_8h_source.html#l00089">89</a> of file <a class="el" href="mfs_8h_source.html">mfs.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="group___m_f_s.html#ga97816ae2db1ccf97bf652877db13aff1">mfs_flash_copy()</a>.</p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="gab1553dd70ef82b0c4a4ba607c660563a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab1553dd70ef82b0c4a4ba607c660563a">&#9670;&nbsp;</a></span>mfs_id_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef uint32_t <a class="el" href="group___m_f_s.html#gab1553dd70ef82b0c4a4ba607c660563a">mfs_id_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Type of a record identifier. </p>

<p class="definition">Definition at line <a class="el" href="mfs_8h_source.html#l00176">176</a> of file <a class="el" href="mfs_8h_source.html">mfs.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="gacd79c4165137b0cdce501f1fb9ee9f38"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gacd79c4165137b0cdce501f1fb9ee9f38">&#9670;&nbsp;</a></span>mfs_bank_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group___m_f_s.html#gacd79c4165137b0cdce501f1fb9ee9f38">mfs_bank_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Type of a flash bank. </p>

<p class="definition">Definition at line <a class="el" href="mfs_8h_source.html#l00120">120</a> of file <a class="el" href="mfs_8h_source.html">mfs.h</a>.</p>

</div>
</div>
<a id="ga58f14c27920b69ab065a8f73281d2732"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga58f14c27920b69ab065a8f73281d2732">&#9670;&nbsp;</a></span>mfs_state_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group___m_f_s.html#ga58f14c27920b69ab065a8f73281d2732">mfs_state_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Type of driver state machine states. </p>

<p class="definition">Definition at line <a class="el" href="mfs_8h_source.html#l00128">128</a> of file <a class="el" href="mfs_8h_source.html">mfs.h</a>.</p>

</div>
</div>
<a id="ga4907f190de6357e5dd4d92227c490cac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4907f190de6357e5dd4d92227c490cac">&#9670;&nbsp;</a></span>mfs_error_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group___m_f_s.html#ga4907f190de6357e5dd4d92227c490cac">mfs_error_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Type of an MFS error code. </p>
<dl class="section note"><dt>Note</dt><dd>Errors are negative integers, informative warnings are positive integers. </dd></dl>

<p class="definition">Definition at line <a class="el" href="mfs_8h_source.html#l00140">140</a> of file <a class="el" href="mfs_8h_source.html">mfs.h</a>.</p>

</div>
</div>
<a id="gaece589baf17093143049bb73d07e1968"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaece589baf17093143049bb73d07e1968">&#9670;&nbsp;</a></span>mfs_bank_state_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group___m_f_s.html#gaece589baf17093143049bb73d07e1968">mfs_bank_state_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Type of a bank state assessment. </p>

<p class="definition">Definition at line <a class="el" href="mfs_8h_source.html#l00156">156</a> of file <a class="el" href="mfs_8h_source.html">mfs.h</a>.</p>

</div>
</div>
<a id="gaf4e3ea9fbb9b415259e2fa0bcfb55c1f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf4e3ea9fbb9b415259e2fa0bcfb55c1f">&#9670;&nbsp;</a></span>mfs_record_state_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group___m_f_s.html#gaf4e3ea9fbb9b415259e2fa0bcfb55c1f">mfs_record_state_t</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Type of a record state assessment. </p>

<p class="definition">Definition at line <a class="el" href="mfs_8h_source.html#l00166">166</a> of file <a class="el" href="mfs_8h_source.html">mfs.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="gabfee0e57611e55ed09ad89610b9ffdfd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gabfee0e57611e55ed09ad89610b9ffdfd">&#9670;&nbsp;</a></span>mfs_flash_read()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="group___m_f_s.html#ga4907f190de6357e5dd4d92227c490cac">mfs_error_t</a> mfs_flash_read </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_m_f_s_driver.html">MFSDriver</a> *&#160;</td>
          <td class="paramname"><em>mfsp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___h_a_l___f_l_a_s_h.html#ga60d8c17713c707efa497130923db3ca3">flash_offset_t</a>&#160;</td>
          <td class="paramname"><em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>rp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Flash read. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mfsp</td><td>pointer to the <code><a class="el" href="struct_m_f_s_driver.html" title="Type of an MFS instance. ">MFSDriver</a></code> object </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">offset</td><td>flash offset </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">n</td><td>number of bytes to be read </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">rp</td><td>pointer to the data buffer </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The operation status.</dd></dl>
<dl class="section user"><dt>Function Class:Not an API, this function is for internal use only.</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="mfs_8c_source.html#l00151">151</a> of file <a class="el" href="mfs_8c_source.html">mfs.c</a>.</p>

<p class="reference">References <a class="el" href="struct_m_f_s_driver.html#a5156bf2198adb862e972b613a73fdd47">MFSDriver::config</a>, <a class="el" href="struct_m_f_s_config.html#add51de97f84764637bf739cb5ad47e19">MFSConfig::flashp</a>, and <a class="el" href="group___h_a_l___f_l_a_s_h.html#ga4cd17b0bd53628f8e625a35848c08676">flashRead</a>.</p>

<p class="reference">Referenced by <a class="el" href="group___m_f_s.html#ga97816ae2db1ccf97bf652877db13aff1">mfs_flash_copy()</a>.</p>

</div>
</div>
<a id="ga7ff7f938edf6fc7d7568dff18696ce7c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga7ff7f938edf6fc7d7568dff18696ce7c">&#9670;&nbsp;</a></span>mfs_flash_write()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="group___m_f_s.html#ga4907f190de6357e5dd4d92227c490cac">mfs_error_t</a> mfs_flash_write </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_m_f_s_driver.html">MFSDriver</a> *&#160;</td>
          <td class="paramname"><em>mfsp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___h_a_l___f_l_a_s_h.html#ga60d8c17713c707efa497130923db3ca3">flash_offset_t</a>&#160;</td>
          <td class="paramname"><em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>wp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Flash write. </p>
<dl class="section note"><dt>Note</dt><dd>If the option <code>MFS_CFG_WRITE_VERIFY</code> is enabled then the flash is also read back for verification.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mfsp</td><td>pointer to the <code><a class="el" href="struct_m_f_s_driver.html" title="Type of an MFS instance. ">MFSDriver</a></code> object </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">offset</td><td>flash offset </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">n</td><td>number of bytes to be written </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">wp</td><td>pointer to the data buffer </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The operation status.</dd></dl>
<dl class="section user"><dt>Function Class:Not an API, this function is for internal use only.</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="mfs_8c_source.html#l00177">177</a> of file <a class="el" href="mfs_8c_source.html">mfs.c</a>.</p>

<p class="reference">References <a class="el" href="struct_m_f_s_driver.html#a5156bf2198adb862e972b613a73fdd47">MFSDriver::config</a>, <a class="el" href="struct_m_f_s_config.html#add51de97f84764637bf739cb5ad47e19">MFSConfig::flashp</a>, and <a class="el" href="group___h_a_l___f_l_a_s_h.html#gac2312eaaf5758805382532f10e3d92cb">flashProgram</a>.</p>

<p class="reference">Referenced by <a class="el" href="group___m_f_s.html#ga97816ae2db1ccf97bf652877db13aff1">mfs_flash_copy()</a>.</p>

</div>
</div>
<a id="ga97816ae2db1ccf97bf652877db13aff1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga97816ae2db1ccf97bf652877db13aff1">&#9670;&nbsp;</a></span>mfs_flash_copy()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="group___m_f_s.html#ga4907f190de6357e5dd4d92227c490cac">mfs_error_t</a> mfs_flash_copy </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_m_f_s_driver.html">MFSDriver</a> *&#160;</td>
          <td class="paramname"><em>mfsp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___h_a_l___f_l_a_s_h.html#ga60d8c17713c707efa497130923db3ca3">flash_offset_t</a>&#160;</td>
          <td class="paramname"><em>doffset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___h_a_l___f_l_a_s_h.html#ga60d8c17713c707efa497130923db3ca3">flash_offset_t</a>&#160;</td>
          <td class="paramname"><em>soffset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>n</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Flash copy. </p>
<dl class="section note"><dt>Note</dt><dd>If the option <code>MFS_CFG_WRITE_VERIFY</code> is enabled then the flash is also read back for verification.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mfsp</td><td>pointer to the <code><a class="el" href="struct_m_f_s_driver.html" title="Type of an MFS instance. ">MFSDriver</a></code> object </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">doffset</td><td>destination flash offset </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">soffset</td><td>source flash offset </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">n</td><td>number of bytes to be copied </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The operation status.</dd></dl>
<dl class="section user"><dt>Function Class:Not an API, this function is for internal use only.</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="mfs_8c_source.html#l00220">220</a> of file <a class="el" href="mfs_8c_source.html">mfs.c</a>.</p>

<p class="reference">References <a class="el" href="struct_m_f_s_driver.html#af9978bcc8f41e20c294c529be3078504">MFSDriver::buffer</a>, <a class="el" href="group___m_f_s.html#ga1b852c8a1778e81373b7e8a4626c5472">MFS_CFG_BUFFER_SIZE</a>, <a class="el" href="group___m_f_s.html#gabfee0e57611e55ed09ad89610b9ffdfd">mfs_flash_read()</a>, <a class="el" href="group___m_f_s.html#ga7ff7f938edf6fc7d7568dff18696ce7c">mfs_flash_write()</a>, and <a class="el" href="group___m_f_s.html#ga0277a2d4d7591173f0275af429e33a13">RET_ON_ERROR</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group___m_f_s_ga97816ae2db1ccf97bf652877db13aff1_cgraph.png" border="0" usemap="#group___m_f_s_ga97816ae2db1ccf97bf652877db13aff1_cgraph" alt=""/></div>
<map name="group___m_f_s_ga97816ae2db1ccf97bf652877db13aff1_cgraph" id="group___m_f_s_ga97816ae2db1ccf97bf652877db13aff1_cgraph">
<area shape="rect" id="node2" href="group___m_f_s.html#gabfee0e57611e55ed09ad89610b9ffdfd" title="Flash read. " alt="" coords="149,5,243,29"/>
<area shape="rect" id="node3" href="group___m_f_s.html#ga7ff7f938edf6fc7d7568dff18696ce7c" title="Flash write. " alt="" coords="148,53,244,77"/>
</map>
</div>

</div>
</div>
<a id="gafa2fc5d3f323e9a6c3d597432d57471d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gafa2fc5d3f323e9a6c3d597432d57471d">&#9670;&nbsp;</a></span>mfs_record_check()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="group___m_f_s.html#ga4907f190de6357e5dd4d92227c490cac">mfs_error_t</a> mfs_record_check </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_m_f_s_driver.html">MFSDriver</a> *&#160;</td>
          <td class="paramname"><em>mfsp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="unionmfs__data__header__t.html">mfs_data_header_t</a> *&#160;</td>
          <td class="paramname"><em>dhdrp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___h_a_l___f_l_a_s_h.html#ga60d8c17713c707efa497130923db3ca3">flash_offset_t</a>&#160;</td>
          <td class="paramname"><em>offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___h_a_l___f_l_a_s_h.html#ga60d8c17713c707efa497130923db3ca3">flash_offset_t</a>&#160;</td>
          <td class="paramname"><em>limit</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___m_f_s.html#gaf4e3ea9fbb9b415259e2fa0bcfb55c1f">mfs_record_state_t</a> *&#160;</td>
          <td class="paramname"><em>sts</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Verifies integrity of a record. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mfsp</td><td>pointer to the <code><a class="el" href="struct_m_f_s_driver.html" title="Type of an MFS instance. ">MFSDriver</a></code> object </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">dhdrp</td><td>pointer to the header to be checked </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">offset</td><td>flash offset of the header to be checked </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">limit</td><td>flash limit offset </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">sts</td><td>assessed record state </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The operation status.</dd></dl>
<dl class="section user"><dt>Function Class:Not an API, this function is for internal use only.</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="mfs_8c_source.html#l00259">259</a> of file <a class="el" href="mfs_8c_source.html">mfs.c</a>.</p>

<p class="reference">References <a class="el" href="struct_m_f_s_driver.html#a5156bf2198adb862e972b613a73fdd47">MFSDriver::config</a>, <a class="el" href="struct_m_f_s_config.html#a028bf89c2ea56dfd85c0b4d72605e3bf">MFSConfig::erased</a>, and <a class="el" href="unionmfs__data__header__t.html#a4059d4353c1c8457d5a9cb82e4842265">mfs_data_header_t::magic</a>.</p>

</div>
</div>
<a id="gac66b45ab34eea80bfa81422127c430ed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac66b45ab34eea80bfa81422127c430ed">&#9670;&nbsp;</a></span>mfs_bank_erase()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="group___m_f_s.html#ga4907f190de6357e5dd4d92227c490cac">mfs_error_t</a> mfs_bank_erase </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_m_f_s_driver.html">MFSDriver</a> *&#160;</td>
          <td class="paramname"><em>mfsp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___m_f_s.html#gacd79c4165137b0cdce501f1fb9ee9f38">mfs_bank_t</a>&#160;</td>
          <td class="paramname"><em>bank</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Erases and verifies all sectors belonging to a bank. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mfsp</td><td>pointer to the <code><a class="el" href="struct_m_f_s_driver.html" title="Type of an MFS instance. ">MFSDriver</a></code> object </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">bank</td><td>bank to be erased </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The operation status.</dd></dl>
<dl class="section user"><dt>Function Class:Not an API, this function is for internal use only.</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="mfs_8c_source.html#l00302">302</a> of file <a class="el" href="mfs_8c_source.html">mfs.c</a>.</p>

</div>
</div>
<a id="ga7ef3fba2f9e3b9d03811faa1eaf4bd09"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga7ef3fba2f9e3b9d03811faa1eaf4bd09">&#9670;&nbsp;</a></span>mfs_bank_verify_erase()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="group___m_f_s.html#ga4907f190de6357e5dd4d92227c490cac">mfs_error_t</a> mfs_bank_verify_erase </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_m_f_s_driver.html">MFSDriver</a> *&#160;</td>
          <td class="paramname"><em>mfsp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___m_f_s.html#gacd79c4165137b0cdce501f1fb9ee9f38">mfs_bank_t</a>&#160;</td>
          <td class="paramname"><em>bank</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Erases and verifies all sectors belonging to a bank. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mfsp</td><td>pointer to the <code><a class="el" href="struct_m_f_s_driver.html" title="Type of an MFS instance. ">MFSDriver</a></code> object </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">bank</td><td>bank to be verified </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The operation status.</dd></dl>
<dl class="section user"><dt>Function Class:Not an API, this function is for internal use only.</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="mfs_8c_source.html#l00348">348</a> of file <a class="el" href="mfs_8c_source.html">mfs.c</a>.</p>

</div>
</div>
<a id="gac1f359bdbdb34e5a45832751f91ed73e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac1f359bdbdb34e5a45832751f91ed73e">&#9670;&nbsp;</a></span>mfs_bank_write_header()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="group___m_f_s.html#ga4907f190de6357e5dd4d92227c490cac">mfs_error_t</a> mfs_bank_write_header </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_m_f_s_driver.html">MFSDriver</a> *&#160;</td>
          <td class="paramname"><em>mfsp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___m_f_s.html#gacd79c4165137b0cdce501f1fb9ee9f38">mfs_bank_t</a>&#160;</td>
          <td class="paramname"><em>bank</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>cnt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Writes the validation header in a bank. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mfsp</td><td>pointer to the <code><a class="el" href="struct_m_f_s_driver.html" title="Type of an MFS instance. ">MFSDriver</a></code> object </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">bank</td><td>bank to be validated </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">cnt</td><td>value for the flash usage counter </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The operation status. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">MFS_NO_ERROR</td><td>if the operation has been successfully completed.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Function Class:Not an API, this function is for internal use only.</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="mfs_8c_source.html#l00389">389</a> of file <a class="el" href="mfs_8c_source.html">mfs.c</a>.</p>

</div>
</div>
<a id="ga43672f7618a835997fa771e99e784184"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga43672f7618a835997fa771e99e784184">&#9670;&nbsp;</a></span>mfs_bank_scan_records()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="group___m_f_s.html#ga4907f190de6357e5dd4d92227c490cac">mfs_error_t</a> mfs_bank_scan_records </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_m_f_s_driver.html">MFSDriver</a> *&#160;</td>
          <td class="paramname"><em>mfsp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___m_f_s.html#gacd79c4165137b0cdce501f1fb9ee9f38">mfs_bank_t</a>&#160;</td>
          <td class="paramname"><em>bank</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___m_f_s.html#gaece589baf17093143049bb73d07e1968">mfs_bank_state_t</a> *&#160;</td>
          <td class="paramname"><em>statep</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Scans blocks searching for records. </p>
<dl class="section note"><dt>Note</dt><dd>The block integrity is strongly checked.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mfsp</td><td>pointer to the <code><a class="el" href="struct_m_f_s_driver.html" title="Type of an MFS instance. ">MFSDriver</a></code> object </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">bank</td><td>the bank identifier </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">statep</td><td>bank state, it can be:<ul>
<li>MFS_BANK_PARTIAL</li>
<li>MFS_BANK_OK</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The operation status.</dd></dl>
<dl class="section user"><dt>Function Class:Not an API, this function is for internal use only.</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="mfs_8c_source.html#l00430">430</a> of file <a class="el" href="mfs_8c_source.html">mfs.c</a>.</p>

</div>
</div>
<a id="gae543e9eed45f7236869a8ffc5682c991"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae543e9eed45f7236869a8ffc5682c991">&#9670;&nbsp;</a></span>mfs_bank_get_state()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="group___m_f_s.html#ga4907f190de6357e5dd4d92227c490cac">mfs_error_t</a> mfs_bank_get_state </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_m_f_s_driver.html">MFSDriver</a> *&#160;</td>
          <td class="paramname"><em>mfsp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___m_f_s.html#gacd79c4165137b0cdce501f1fb9ee9f38">mfs_bank_t</a>&#160;</td>
          <td class="paramname"><em>bank</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___m_f_s.html#gaece589baf17093143049bb73d07e1968">mfs_bank_state_t</a> *&#160;</td>
          <td class="paramname"><em>statep</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>cntp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Determines the state of a bank. </p>
<dl class="section note"><dt>Note</dt><dd>This function does not test the bank integrity by scanning the data area, it just checks the header.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mfsp</td><td>pointer to the <code><a class="el" href="struct_m_f_s_driver.html" title="Type of an MFS instance. ">MFSDriver</a></code> object </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">bank</td><td>bank to be checked </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">statep</td><td>bank state, it can be:<ul>
<li>MFS_BANK_ERASED</li>
<li>MFS_BANK_GARBAGE</li>
<li>MFS_BANK_OK</li>
</ul>
</td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">cntp</td><td>bank counter </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The operation status.</dd></dl>
<dl class="section user"><dt>Function Class:Not an API, this function is for internal use only.</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="mfs_8c_source.html#l00521">521</a> of file <a class="el" href="mfs_8c_source.html">mfs.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="group___m_f_s.html#ga5625fd5863620167862fc77ac1aedcf6">mfs_try_mount()</a>.</p>

</div>
</div>
<a id="gaf98c194cbd68acefc32dc98848c53c59"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf98c194cbd68acefc32dc98848c53c59">&#9670;&nbsp;</a></span>mfs_bank_mount()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="group___m_f_s.html#ga4907f190de6357e5dd4d92227c490cac">mfs_error_t</a> mfs_bank_mount </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_m_f_s_driver.html">MFSDriver</a> *&#160;</td>
          <td class="paramname"><em>mfsp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___m_f_s.html#gacd79c4165137b0cdce501f1fb9ee9f38">mfs_bank_t</a>&#160;</td>
          <td class="paramname"><em>bank</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___m_f_s.html#gaece589baf17093143049bb73d07e1968">mfs_bank_state_t</a> *&#160;</td>
          <td class="paramname"><em>statep</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Selects a bank as current. </p>
<dl class="section note"><dt>Note</dt><dd>The bank header is assumed to be valid.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mfsp</td><td>pointer to the <code><a class="el" href="struct_m_f_s_driver.html" title="Type of an MFS instance. ">MFSDriver</a></code> object </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">bank</td><td>bank to be scanned </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">statep</td><td>bank state, it can be:<ul>
<li>MFS_BANK_ERASED</li>
<li>MFS_BANK_GARBAGE</li>
<li>MFS_BANK_PARTIAL</li>
<li>MFS_BANK_OK</li>
</ul>
</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The operation status.</dd></dl>
<dl class="section user"><dt>Function Class:Not an API, this function is for internal use only.</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="mfs_8c_source.html#l00589">589</a> of file <a class="el" href="mfs_8c_source.html">mfs.c</a>.</p>

</div>
</div>
<a id="ga3880c92a1858f47e85bc21d586db2768"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3880c92a1858f47e85bc21d586db2768">&#9670;&nbsp;</a></span>mfs_garbage_collect()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="group___m_f_s.html#ga4907f190de6357e5dd4d92227c490cac">mfs_error_t</a> mfs_garbage_collect </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_m_f_s_driver.html">MFSDriver</a> *&#160;</td>
          <td class="paramname"><em>mfsp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Enforces a garbage collection. </p>
<p>Storage data is compacted into a single bank.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">mfsp</td><td>pointer to the <code><a class="el" href="struct_m_f_s_driver.html" title="Type of an MFS instance. ">MFSDriver</a></code> object </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The operation status.</dd></dl>
<dl class="section user"><dt>Function Class:Not an API, this function is for internal use only.</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="mfs_8c_source.html#l00622">622</a> of file <a class="el" href="mfs_8c_source.html">mfs.c</a>.</p>

<p class="reference">References <a class="el" href="struct_m_f_s_driver.html#a478c6f7768fe80177f0a17a4d3671a4e">MFSDriver::current_bank</a>.</p>

</div>
</div>
<a id="ga5625fd5863620167862fc77ac1aedcf6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5625fd5863620167862fc77ac1aedcf6">&#9670;&nbsp;</a></span>mfs_try_mount()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="group___m_f_s.html#ga4907f190de6357e5dd4d92227c490cac">mfs_error_t</a> mfs_try_mount </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_m_f_s_driver.html">MFSDriver</a> *&#160;</td>
          <td class="paramname"><em>mfsp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Performs a flash partition mount attempt. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mfsp</td><td>pointer to the <code><a class="el" href="struct_m_f_s_driver.html" title="Type of an MFS instance. ">MFSDriver</a></code> object </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The operation status.</dd></dl>
<dl class="section user"><dt>Function Class:Normal API, this function can be invoked by regular system threads but not from within a lock zone.</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="mfs_8c_source.html#l00673">673</a> of file <a class="el" href="mfs_8c_source.html">mfs.c</a>.</p>

<p class="reference">References <a class="el" href="group___m_f_s.html#gae543e9eed45f7236869a8ffc5682c991">mfs_bank_get_state()</a>, and <a class="el" href="group___m_f_s.html#ga0277a2d4d7591173f0275af429e33a13">RET_ON_ERROR</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="group___m_f_s_ga5625fd5863620167862fc77ac1aedcf6_cgraph.png" border="0" usemap="#group___m_f_s_ga5625fd5863620167862fc77ac1aedcf6_cgraph" alt=""/></div>
<map name="group___m_f_s_ga5625fd5863620167862fc77ac1aedcf6_cgraph" id="group___m_f_s_ga5625fd5863620167862fc77ac1aedcf6_cgraph">
<area shape="rect" id="node2" href="group___m_f_s.html#gae543e9eed45f7236869a8ffc5682c991" title="Determines the state of a bank. " alt="" coords="147,5,265,29"/>
</map>
</div>

</div>
</div>
<a id="ga973dac70b5f8ea14000fd262fef8a1fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga973dac70b5f8ea14000fd262fef8a1fd">&#9670;&nbsp;</a></span>mfs_mount()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___m_f_s.html#ga4907f190de6357e5dd4d92227c490cac">mfs_error_t</a> mfs_mount </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_m_f_s_driver.html">MFSDriver</a> *&#160;</td>
          <td class="paramname"><em>mfsp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Configures and activates a MFS driver. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mfsp</td><td>pointer to the <code><a class="el" href="struct_m_f_s_driver.html" title="Type of an MFS instance. ">MFSDriver</a></code> object </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The operation status. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">MFS_NO_ERROR</td><td>if the operation has been successfully completed. </td></tr>
    <tr><td class="paramname">MFS_WARN_GC</td><td>if the operation triggered a garbage collection. </td></tr>
    <tr><td class="paramname">MFS_ERR_FLASH_FAILURE</td><td>if the flash memory is unusable because HW failures. Makes the driver enter the <code>MFS_ERROR</code> state. </td></tr>
    <tr><td class="paramname">MFS_ERR_INTERNAL</td><td>if an internal logic failure is detected.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Function Class:Normal API, this function can be invoked by regular system threads but not from within a lock zone.</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="mfs_8c_source.html#l00793">793</a> of file <a class="el" href="mfs_8c_source.html">mfs.c</a>.</p>

</div>
</div>
<a id="gab79398dd37917f5ddc8e3f80d16e88b0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab79398dd37917f5ddc8e3f80d16e88b0">&#9670;&nbsp;</a></span>mfsObjectInit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mfsObjectInit </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_m_f_s_driver.html">MFSDriver</a> *&#160;</td>
          <td class="paramname"><em>mfsp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializes an instance. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">mfsp</td><td>pointer to the <code><a class="el" href="struct_m_f_s_driver.html" title="Type of an MFS instance. ">MFSDriver</a></code> object</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Function Class:Initializer, this function just initializes an object and can be invoked before the kernel is initialized.</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="mfs_8c_source.html#l00832">832</a> of file <a class="el" href="mfs_8c_source.html">mfs.c</a>.</p>

<p class="reference">References <a class="el" href="group___o_s_a_l.html#gadf56fc259582a041ae47bcabe5f49b00">osalDbgCheck</a>, and <a class="el" href="struct_m_f_s_driver.html#acc6e1550f5a36f77f2ac6fc28d116075">MFSDriver::state</a>.</p>

</div>
</div>
<a id="ga6869dc876ed8621a612ed5dd95afece6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga6869dc876ed8621a612ed5dd95afece6">&#9670;&nbsp;</a></span>mfsStart()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___m_f_s.html#ga4907f190de6357e5dd4d92227c490cac">mfs_error_t</a> mfsStart </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_m_f_s_driver.html">MFSDriver</a> *&#160;</td>
          <td class="paramname"><em>mfsp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="struct_m_f_s_config.html">MFSConfig</a> *&#160;</td>
          <td class="paramname"><em>config</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Configures and activates a MFS driver. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mfsp</td><td>pointer to the <code><a class="el" href="struct_m_f_s_driver.html" title="Type of an MFS instance. ">MFSDriver</a></code> object </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">config</td><td>pointer to the configuration </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The operation status. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">MFS_NO_ERROR</td><td>if the operation has been successfully completed. </td></tr>
    <tr><td class="paramname">MFS_WARN_GC</td><td>if the operation triggered a garbage collection. </td></tr>
    <tr><td class="paramname">MFS_ERR_FLASH_FAILURE</td><td>if the flash memory is unusable because HW failures. Makes the driver enter the <code>MFS_ERROR</code> state. </td></tr>
    <tr><td class="paramname">MFS_ERR_INTERNAL</td><td>if an internal logic failure is detected.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Function Class:Normal API, this function can be invoked by regular system threads but not from within a lock zone.</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="mfs_8c_source.html#l00854">854</a> of file <a class="el" href="mfs_8c_source.html">mfs.c</a>.</p>

<p class="reference">References <a class="el" href="group___o_s_a_l.html#gad2c73ec79f38fe705784c3b51426fef7">osalDbgAssert</a>, <a class="el" href="group___o_s_a_l.html#gadf56fc259582a041ae47bcabe5f49b00">osalDbgCheck</a>, and <a class="el" href="struct_m_f_s_driver.html#acc6e1550f5a36f77f2ac6fc28d116075">MFSDriver::state</a>.</p>

</div>
</div>
<a id="gae3f8c1b72b2f060c3c6133ad93d41557"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae3f8c1b72b2f060c3c6133ad93d41557">&#9670;&nbsp;</a></span>mfsStop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mfsStop </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_m_f_s_driver.html">MFSDriver</a> *&#160;</td>
          <td class="paramname"><em>mfsp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Deactivates a MFS driver. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mfsp</td><td>pointer to the <code><a class="el" href="struct_m_f_s_driver.html" title="Type of an MFS instance. ">MFSDriver</a></code> object</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Function Class:Normal API, this function can be invoked by regular system threads but not from within a lock zone.</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="mfs_8c_source.html#l00873">873</a> of file <a class="el" href="mfs_8c_source.html">mfs.c</a>.</p>

<p class="reference">References <a class="el" href="group___o_s_a_l.html#gad2c73ec79f38fe705784c3b51426fef7">osalDbgAssert</a>, <a class="el" href="group___o_s_a_l.html#gadf56fc259582a041ae47bcabe5f49b00">osalDbgCheck</a>, and <a class="el" href="struct_m_f_s_driver.html#acc6e1550f5a36f77f2ac6fc28d116075">MFSDriver::state</a>.</p>

</div>
</div>
<a id="gae9f14dce0c75dee4e0a24ea776961a00"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae9f14dce0c75dee4e0a24ea776961a00">&#9670;&nbsp;</a></span>mfsErase()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___m_f_s.html#ga4907f190de6357e5dd4d92227c490cac">mfs_error_t</a> mfsErase </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_m_f_s_driver.html">MFSDriver</a> *&#160;</td>
          <td class="paramname"><em>mfsp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Destroys the state of the managed storage by erasing the flash. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mfsp</td><td>pointer to the <code><a class="el" href="struct_m_f_s_driver.html" title="Type of an MFS instance. ">MFSDriver</a></code> object </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The operation status. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">MFS_ERR_INV_STATE</td><td>if the driver is in not in <code>MSG_READY</code> state. </td></tr>
    <tr><td class="paramname">MFS_NO_ERROR</td><td>if the operation has been successfully completed. </td></tr>
    <tr><td class="paramname">MFS_ERR_FLASH_FAILURE</td><td>if the flash memory is unusable because HW failures. Makes the driver enter the <code>MFS_ERROR</code> state. </td></tr>
    <tr><td class="paramname">MFS_ERR_INTERNAL</td><td>if an internal logic failure is detected.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Function Class:Normal API, this function can be invoked by regular system threads but not from within a lock zone.</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="mfs_8c_source.html#l00896">896</a> of file <a class="el" href="mfs_8c_source.html">mfs.c</a>.</p>

<p class="reference">References <a class="el" href="group___o_s_a_l.html#gadf56fc259582a041ae47bcabe5f49b00">osalDbgCheck</a>, and <a class="el" href="struct_m_f_s_driver.html#acc6e1550f5a36f77f2ac6fc28d116075">MFSDriver::state</a>.</p>

</div>
</div>
<a id="ga2b6577aeec41970de3b351f27b728d0b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2b6577aeec41970de3b351f27b728d0b">&#9670;&nbsp;</a></span>mfsReadRecord()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___m_f_s.html#ga4907f190de6357e5dd4d92227c490cac">mfs_error_t</a> mfsReadRecord </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_m_f_s_driver.html">MFSDriver</a> *&#160;</td>
          <td class="paramname"><em>mfsp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___m_f_s.html#gab1553dd70ef82b0c4a4ba607c660563a">mfs_id_t</a>&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&#160;</td>
          <td class="paramname"><em>np</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>buffer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieves and reads a data record. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mfsp</td><td>pointer to the <code><a class="el" href="struct_m_f_s_driver.html" title="Type of an MFS instance. ">MFSDriver</a></code> object </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">id</td><td>record numeric identifier, the valid range is between <code>1</code> and <code>MFS_CFG_MAX_RECORDS</code> </td></tr>
    <tr><td class="paramdir">[in,out]</td><td class="paramname">np</td><td>on input is the maximum buffer size, on return it is the size of the data copied into the buffer </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">buffer</td><td>pointer to a buffer for record data </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The operation status. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">MFS_NO_ERROR</td><td>if the operation has been successfully completed. </td></tr>
    <tr><td class="paramname">MFS_ERR_INV_STATE</td><td>if the driver is in not in <code>MSG_READY</code> state. </td></tr>
    <tr><td class="paramname">MFS_ERR_INV_SIZE</td><td>if the passed buffer is not large enough to contain the record data. </td></tr>
    <tr><td class="paramname">MFS_ERR_NOT_FOUND</td><td>if the specified id does not exists. </td></tr>
    <tr><td class="paramname">MFS_ERR_FLASH_FAILURE</td><td>if the flash memory is unusable because HW failures. Makes the driver enter the <code>MFS_ERROR</code> state. </td></tr>
    <tr><td class="paramname">MFS_ERR_INTERNAL</td><td>if an internal logic failure is detected.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Function Class:Normal API, this function can be invoked by regular system threads but not from within a lock zone.</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="mfs_8c_source.html#l00931">931</a> of file <a class="el" href="mfs_8c_source.html">mfs.c</a>.</p>

<p class="reference">References <a class="el" href="group___m_f_s.html#ga0dd05a7bc7d3f69ee9e95c0fe3f26b38">MFS_CFG_MAX_RECORDS</a>, <a class="el" href="group___o_s_a_l.html#gadf56fc259582a041ae47bcabe5f49b00">osalDbgCheck</a>, and <a class="el" href="struct_m_f_s_driver.html#acc6e1550f5a36f77f2ac6fc28d116075">MFSDriver::state</a>.</p>

</div>
</div>
<a id="gaa8d796e4f2fda16203809b7eb2015467"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa8d796e4f2fda16203809b7eb2015467">&#9670;&nbsp;</a></span>mfsWriteRecord()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___m_f_s.html#ga4907f190de6357e5dd4d92227c490cac">mfs_error_t</a> mfsWriteRecord </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_m_f_s_driver.html">MFSDriver</a> *&#160;</td>
          <td class="paramname"><em>mfsp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___m_f_s.html#gab1553dd70ef82b0c4a4ba607c660563a">mfs_id_t</a>&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>n</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>buffer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Creates or updates a data record. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mfsp</td><td>pointer to the <code><a class="el" href="struct_m_f_s_driver.html" title="Type of an MFS instance. ">MFSDriver</a></code> object </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">id</td><td>record numeric identifier, the valid range is between <code>1</code> and <code>MFS_CFG_MAX_RECORDS</code> </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">n</td><td>size of data to be written, it cannot be zero </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">buffer</td><td>pointer to a buffer for record data </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The operation status. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">MFS_NO_ERROR</td><td>if the operation has been successfully completed. </td></tr>
    <tr><td class="paramname">MFS_WARN_GC</td><td>if the operation triggered a garbage collection. </td></tr>
    <tr><td class="paramname">MFS_ERR_INV_STATE</td><td>if the driver is in not in <code>MSG_READY</code> state. </td></tr>
    <tr><td class="paramname">MFS_ERR_OUT_OF_MEM</td><td>if there is not enough flash space for the operation. </td></tr>
    <tr><td class="paramname">MFS_ERR_FLASH_FAILURE</td><td>if the flash memory is unusable because HW failures. Makes the driver enter the <code>MFS_ERROR</code> state. </td></tr>
    <tr><td class="paramname">MFS_ERR_INTERNAL</td><td>if an internal logic failure is detected.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Function Class:Normal API, this function can be invoked by regular system threads but not from within a lock zone.</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="mfs_8c_source.html#l00996">996</a> of file <a class="el" href="mfs_8c_source.html">mfs.c</a>.</p>

<p class="reference">References <a class="el" href="group___m_f_s.html#ga0dd05a7bc7d3f69ee9e95c0fe3f26b38">MFS_CFG_MAX_RECORDS</a>, <a class="el" href="group___o_s_a_l.html#gadf56fc259582a041ae47bcabe5f49b00">osalDbgCheck</a>, and <a class="el" href="struct_m_f_s_driver.html#acc6e1550f5a36f77f2ac6fc28d116075">MFSDriver::state</a>.</p>

</div>
</div>
<a id="ga05869bf0e68cd47e43c98663f1b6fbfc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga05869bf0e68cd47e43c98663f1b6fbfc">&#9670;&nbsp;</a></span>mfsEraseRecord()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___m_f_s.html#ga4907f190de6357e5dd4d92227c490cac">mfs_error_t</a> mfsEraseRecord </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_m_f_s_driver.html">MFSDriver</a> *&#160;</td>
          <td class="paramname"><em>mfsp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___m_f_s.html#gab1553dd70ef82b0c4a4ba607c660563a">mfs_id_t</a>&#160;</td>
          <td class="paramname"><em>id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Erases a data record. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mfsp</td><td>pointer to the <code><a class="el" href="struct_m_f_s_driver.html" title="Type of an MFS instance. ">MFSDriver</a></code> object </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">id</td><td>record numeric identifier, the valid range is between <code>1</code> and <code>MFS_CFG_MAX_RECORDS</code> </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The operation status. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">MFS_NO_ERROR</td><td>if the operation has been successfully completed. </td></tr>
    <tr><td class="paramname">MFS_WARN_GC</td><td>if the operation triggered a garbage collection. </td></tr>
    <tr><td class="paramname">MFS_ERR_INV_STATE</td><td>if the driver is in not in <code>MSG_READY</code> state. </td></tr>
    <tr><td class="paramname">MFS_ERR_FLASH_FAILURE</td><td>if the flash memory is unusable because HW failures. Makes the driver enter the <code>MFS_ERROR</code> state. </td></tr>
    <tr><td class="paramname">MFS_ERR_INTERNAL</td><td>if an internal logic failure is detected.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Function Class:Normal API, this function can be invoked by regular system threads but not from within a lock zone.</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="mfs_8c_source.html#l01084">1084</a> of file <a class="el" href="mfs_8c_source.html">mfs.c</a>.</p>

<p class="reference">References <a class="el" href="group___m_f_s.html#ga0dd05a7bc7d3f69ee9e95c0fe3f26b38">MFS_CFG_MAX_RECORDS</a>, <a class="el" href="group___o_s_a_l.html#gadf56fc259582a041ae47bcabe5f49b00">osalDbgCheck</a>, and <a class="el" href="struct_m_f_s_driver.html#acc6e1550f5a36f77f2ac6fc28d116075">MFSDriver::state</a>.</p>

</div>
</div>
<a id="ga88081d60d4dfc85bacb918e74809da1e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga88081d60d4dfc85bacb918e74809da1e">&#9670;&nbsp;</a></span>mfsPerformGarbageCollection()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___m_f_s.html#ga4907f190de6357e5dd4d92227c490cac">mfs_error_t</a> mfsPerformGarbageCollection </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_m_f_s_driver.html">MFSDriver</a> *&#160;</td>
          <td class="paramname"><em>mfsp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enforces a garbage collection operation. </p>
<p>Garbage collection involves: integrity check, optionally repairs, obsolete data removal, data compaction and a flash bank swap.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">mfsp</td><td>pointer to the <code><a class="el" href="struct_m_f_s_driver.html" title="Type of an MFS instance. ">MFSDriver</a></code> object </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The operation status. </dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">MFS_NO_ERROR</td><td>if the operation has been successfully completed. </td></tr>
    <tr><td class="paramname">MFS_ERR_INV_STATE</td><td>if the driver is in not in <code>MSG_READY</code> state. </td></tr>
    <tr><td class="paramname">MFS_ERR_FLASH_FAILURE</td><td>if the flash memory is unusable because HW failures. Makes the driver enter the <code>MFS_ERROR</code> state. </td></tr>
    <tr><td class="paramname">MFS_ERR_INTERNAL</td><td>if an internal logic failure is detected.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section user"><dt>Function Class:Normal API, this function can be invoked by regular system threads but not from within a lock zone.</dt><dd></dd></dl>

<p class="definition">Definition at line <a class="el" href="mfs_8c_source.html#l01153">1153</a> of file <a class="el" href="mfs_8c_source.html">mfs.c</a>.</p>

<p class="reference">References <a class="el" href="group___o_s_a_l.html#gadf56fc259582a041ae47bcabe5f49b00">osalDbgCheck</a>, and <a class="el" href="struct_m_f_s_driver.html#acc6e1550f5a36f77f2ac6fc28d116075">MFSDriver::state</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.8-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Fri Mar 15 2019 10:29:24 for ChibiOS/HAL by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
